## 统计工程的作用

在XL-LightHouse中几乎所有的Web端操作都围绕着四个核心概念“统计工程”、“统计组”、“统计项”和“指标集”。

系统设计原则是将用户分为两种类型：指标管理者（创建指标、接入指标、权限管理等）和指标使用者（查看数据），当然同一个用户可以同时具备上面一种或两种角色。“统计工程”、“统计组”、“统计项”这些概念更多是面向指标管理者来使用的，而指标集则更多是面向指标的使用者。

系统使用“统计工程 - 统计组 - 统计项”的三层结构管理所有数据指标，每个统计需求对应一个统计项，一个统计工程可以包含若干个统计项，而基于同一份元数据的多个统计项叫做一个统计组。

系统推荐使用以统计工程为主体的指标分类机制。在权限管理方面推荐使用以统计工程为粒度的权限审批为主，以统计项为粒度的权限审批为辅的分配机制。

## 统计工程的划分原则

不要将所有指标放在一个工程内，合理划分统计工程有利于后期维护和便于数据指标在企业内部共用，也可以最大程度保障数据指标的安全性。一般来说统计工程的划分会受到几个因素的影响：

+ 工程创建者所属部门

对于大中型企业来说，企业的组织架构是影响“统计工程”划分的主要因素，不同部门的人员不建议同时管理一个统计工程，按部门拆分有利于明确职责边界，避免出现模糊不清的混沌地带。
原则上建议工程创建、原始消息上报、统计项创建和校准均由同一部门的人员负责，而其他用户如需要使用指标则申请相关访问权限即可。

+ 所属业务

一个统计工程内部是具有相同业务属性的一些数据指标的合集，不同业务类别的数据指标不要放在一个工程内部，避免在权限审批时由于权限覆盖面过大导致数据泄露的风险。

+ 数据指标的隐私等级

很多数据指标的隐私等级是不同的，比如在一个电商业务下单服务监控场景中，接口调用日志量监控指标和订单金额、下单用户数等指标具有不同的隐私等级，则不应该放在一个统计工程内部，避免在权限审批时导致数据泄露风险。

+ 数据指标的类型

数据指标依据用途可分为多种类型，比如：业务类指标（订单量、交易额、下单用户数等）、产品类指标（某产品模块的pv、uv、ctr等）、技术类指标（接口耗时、异常量、异常率等）、运维类指标（集群负载、内存、io监控等）、运营类指标（拉新用户量、广告点击量等）。一般来说要将不同用途的数据指标拆分到不同的统计工程实现。

## 创建统计工程

统计工程没有使用数量方面的限制，可根据需要进行创建。点击左侧菜单栏“工程列表” -> 进入列表页后点击“创建”按钮，弹出对话框录入以下信息即可。

统计工程基础信息包括：

1、工程名称

+ 必要字段，可使用中文、英文、数字等各种字符，长度限制：5 ~ 30个字符。
+ 建议使用清晰、简洁、具有业务标识性的名称，便于指标在企业内部共用。

2、所属部门

+ 必要字段，部门不可随意选择，默认使用当前用户所在部门。

3、私有类型

统计工程依据访问限制分为两种类型：私有类型和公开类型。私有工程只允许工程管理员、授权用户以及授权部门下的用户可以访问，公开类型允许系统内的所有用户访问。

4、描述信息

+ 用于描述当前统计工程的作用和所包含的数据指标等信息。

## 修改统计工程

统计工程管理员进入“工程列表”页，选择相应工程，点击“修改”按钮可修改当前工程的基础信息。

## 统计工程的权限

统计工程分为私有和公开类型，拥有工程访问权限的用户可以查看其下所有数据指标，拥有管理员权限的用户除了查看数据指标外还可以管理工程下的统计组和统计项以及进行权限管理等操作。

## 删除统计工程

+ 工程管理员点击“工程列表”菜单项进入列表页，选择相应统计工程，点击“删除”按钮可执行工程删除操作。
+ 系统在删除统计工程前会首先判断是否包含统计组和统计项，如果包含则禁止删除，需要首先将其下的所有统计组和统计项均删除后才可执行删除逻辑。