# XL-LightHouse日常维护

## 重启操作

请使用部署账号登录系统（部署账号为：deploy.json中的deploy_user参数，密码为：deploy_user_passwd参数）

```
# 该命令将重启lighthouse及其依赖组件
./restart-all.sh

# 该命令只重启lighthouse
./restart.sh
```

## 监控集群运行状态

访问以下页面，个人电脑需要配置远程服务器对应hosts文件。（可以直接将服务器/etc/hosts文件中的对应配置添加到个人电脑）
```
spark集群监控页面：http://10.206.0.7:8081?user.name=ldp 任务运行监控：http://10.206.0.7:4040?user.name=ldp
hadoop集群监控页面：http://10.206.0.7:9870?user.name=ldp 
hadoop集群Yarn任务页面：http://10.206.0.7:9399/cluster?user.name=ldp
hbase集群监控页面：http://10.206.0.7:16010
```

## 日志导出

将XL-LightHouse和所依赖组件的日志打包导出，可执行以下操作：

使用部署账号登录操作系统，

```
# 进入操作路径
cd /opt/soft/lighthouse-2.1.4/bin/tools/logpack

# 执行命令
./logpack.sh

参数：
./logpack.sh 5 ,将最近5天的日志文件导出，默认为2，最大值30天
```

日志输出路径为：

/opt/soft/lighthouse-2.1.4/temp/logpack/lighthouse-summary-2024-04-19.tar.gz


## 注意事项
+ 1、集群中所有节点必须配置时间服务器、并保证时区准确；
+ 2、部署完成，线上使用时建议关闭外网访问权限，防止外网的端口扫描、探测请求影响服务正常运行，Web端服务建议通过内网访问，避免数据泄漏的风险；
+ 3、对于有条件的企业，建议将存储引擎替换为有专业团队维护的存储引擎服务，比如：云服务厂商的hbase/mysql存储服务或公司内部DB团队维护的hbase/mysql存储服务，并对数据进行周期性备份，防范数据丢失风险；

